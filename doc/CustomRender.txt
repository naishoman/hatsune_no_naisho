はちゅねのないしょ用プラグイン「CustomRender」です。

※本プラグインは、開発途中のものであり安定使用には程遠いものです。
　ヒトバシラ覚悟の人のみ利用してください。

・目的
　初音ミクの歌唱合成エンジンを標準のものから変更します。
　よーは、初音ミクとめーことUATUのアンサンブルができるかもしれせん。（まだまだですが。。。）
　指定可能なエンジンは、Vocaloid2用NRPNを処理できるVSTiです。(通常のVSTiも暫定対応しました)

・インストール
　はちゅねのないしょのプラグインフォルダ(Plug-in)内にコピーしてください
　現在存在するレンダリングエンジンは、44.1kHz固定ですので、
　ボカロの出力設定を、44.1kHzに変更してください。

・設定項目(CustomRender.ini)
　[Setting]
　　Track1〜16
　　　トラック毎のレンダリングエンジンを、後述のセクション名で指定します。
　　　GUIの設定メニューから変更できるため、直接書き換える必要はありません。
　　　空欄にするとデフォルトの合成エンジンになります。
　[任意のセクション]
　　VSTi
　　　VSTiのDLLのパスを指定します。
　　Gain
　　　VSTiの出力ゲインを設定します。通常は、32767を指定します。
　　　float(-1.0〜+1.0)->short(-32768〜32767)の変換の係数を指定するので
　　　+1/-1超えの値を返すVSTiは、クリップが発生する場合があります。
　　　その場合には、少なめ値を指定してください。(utauvstiとか)
　　　VSTiの出力が小さい場合には、大き目の値を指定することで、波形を増幅することも可能です。
　　NoScan
　　　VSTiのプログラムからシンガー名称の検索機能のON/OFFを切り替えます。
　　　dllの読み込みの遅いVSTiで指定するとちょっと幸せになれます。
　　　0:VSTiのプログラムからシンガー名称の検索を行います。(デフォルト)
　　　1:VSTiのプログラムからシンガー名称の検索を行わないようにします。
　　NoNRPN
　　　VSTiに通常のノートオン・オフを送ります。
　　　0:VSTiにVocaloid NRPNを送ります。(デフォルト)
　　　1:VSTiにノートオン・オフを送ります。一般的な音源VSTiが鳴るようになります。
　　それ以外のキー
　　　VSTiのプログラム名からシンガー名称が取得できなかった場合または、NoScan=1の場合
　　　シンガー名称を手動で指定します。
　　　シンガー名称=PC番号(とBS番号を16ビットシフトした値のOR)
　　　を指定します。

・操作方法
　メニューの設定→レンダリングエンジンから、設定画面を開けます。
　トラックごとのレンダリングエンジンを指定します。

・シンガー固定機能
　レンダリングエンジン設定画面の、「固定」のチェックボックスを入れると、
　レンダリングに使われるシンガーを指定したBS/PCのものに固定できます。
　Vocaloid1のシンガー選択や、一時的にシンガーを変更してチェックなどに利用できます。
　（この機能を利用しなくてもVocaloid1のシンガー選択は可能ですが、
　Vocaloid2のシンガー設定とBS/PCを合わせる必要があり不便なため。）

・動作確認に使用したVSTi(合成エンジン)
　Vocaloid2用のNRPNを処理できるものであれば大丈夫だと思います。
　なお、ここに示しているものは全て、出力設定を44.1kHzにする必要があるようです。
　以降で示すVSTiには、添付の設定ファイルに設定例がコメントにしてありますので、
　コメントをはずし、各自の環境のパスに書き換えれば動作確認ができると思います。

　○utauvsti（kbinani様）
　　飴屋／菖蒲氏作UTAUのcoreを使ったVSTi音源です。
　　徐々にテンポがずれていくことがあります。また、音と音の間に時々ノイズが入ります。
　　（私のPCのCPUパワーが不足しているのもあるかもしれません。）
　　また、複数インスタンス化に対応していないようで、複数トラックで同時に鳴らすためには
　　dllをコピーして別々に読み込ませる必要があります。
　　http://www9.atwiki.jp/boare/pages/95.html

　○ボクロイド ・プラグイン(音楽研究所様)
　　ディレイの実装がされていないせいか、かなり前から発音されます。
　　終了時の処理が若干怪しい気がします。。。
　　http://www.asahi-net.or.jp/~hb9t-ktd/music/Japan/Soft/vokuloid.html

　○Vocaloid VSTi(ヤマハ株式会社 Vocaloid1製品)
　　Vocaloid1製品に付属のVSTi音源です。
　　再現性についてはなかなかだと思いますが、サポートするNRPNに違いがあります。
　　なお、V2限定のNRPNを送るとフリーズします。
　　このVSTiが指定された場合には、送るNRPNをフィルターすることで
　　この問題を回避していますが、完全ではないかもしれません。

・制限事項
　レンダリングエンジンを変更した場合、シンガー設定の表示は実際のものとは変わります。

・外部VSTiのシンガー名称指定
　NRPN対応のVSTi音源製作者は、以下の処理を行うことでシンガー名称で指定が可能になります。
　・シンガー数分だけ、プログラムを用意
　・プログラムのパラメータに、"BS"と"PC"を用意する
　・setProgramで切り替えされた場合に、カレントのパラメータ値を変更
　内部で、受け取ったNRPNからBS/PC固定処理は入れる必要ありません。
　CustomRenderがシンガー変更後のNRPNを送りますので、通常通りレンダリングしてください。

・更新履歴
  Ver.0.14  ・Vocaloid1の再生のデグレを修正
  Ver.0.13  ・シンガー固定機能のデグレを修正
  Ver.0.11  ・デフォルトのレンダリングエンジンが正しく動作していなかった問題を修正
  Ver.0.10  ・トラックごとのレンダリングに対応できるように修正
            ・通常の音源VSTiのサポート
            ・いろいろ内部構造の変更
  Ver.0.09  ・シンガー名称手動指定機能を追加
            ・シンガー名称の検索機能の有効無効切り替えを追加
  Ver.0.08  ・シンガー固定機能が外部VSTiの場合に正しく動作していなかった問題を修正
            ・外部VSTiのプログラムからシンガー名称を取得する機能を追加
  Ver.0.07  ・Vocaloid1/Vocaloid2の場合には、シンガーを名称で選べるようにした。
  Ver.0.06  ・シンガー固定機能を実装
  Ver.0.05  ・Ver.0.03からプレビュー音が鳴らなくなっていたのに暫定対処。
              プレビュー音は、固定で1トラック目として扱われます。(修正予定)
  Ver.0.04  ・ゲインの設定読み込みにバグがあったのを修正
  Ver.0.03  ・処理単位をトラックに変更。設定項目を16トラック分にした。
  Ver.0.02  ・ExportWavesプラグインとメニューIDがコンフリクトしていたのを修正
  Ver.0.01  ・とりあえず作って見た
